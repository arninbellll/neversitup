{"remainingRequest":"/Users/arninbell/Documents/neversitup/todo-app/node_modules/babel-loader/lib/index.js!/Users/arninbell/Documents/neversitup/todo-app/node_modules/eslint-loader/index.js??ref--14-0!/Users/arninbell/Documents/neversitup/todo-app/src/store/index.js","dependencies":[{"path":"/Users/arninbell/Documents/neversitup/todo-app/src/store/index.js","mtime":1675069766393},{"path":"/Users/arninbell/Documents/neversitup/todo-app/babel.config.js","mtime":1674903016353},{"path":"/Users/arninbell/Documents/neversitup/todo-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/arninbell/Documents/neversitup/todo-app/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/arninbell/Documents/neversitup/todo-app/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgVnVlQ29va2llcyBmcm9tICJ2dWUtY29va2llcyI7CmltcG9ydCBWdWV4IGZyb20gInZ1ZXgiOwpWdWUudXNlKFZ1ZUNvb2tpZXMpOwpWdWUuJGNvb2tpZXMuY29uZmlnKCIxZCIpOwpWdWUudXNlKFZ1ZXgpOwpleHBvcnQgZGVmYXVsdCBuZXcgVnVleC5TdG9yZSh7CiAgc3RhdGU6IHsKICAgIHN0YXRlX2F1dGhvcml6ZTogZmFsc2UsCiAgICBzdGF0ZV91c2VyOiAiIiwKICAgIHN0YXRlX3Rva2VuOiAiIgogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBsb2dpbl9mYWlsKHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXRlX2F1dGhvcml6ZSA9IGZhbHNlOwogICAgICBzdGF0ZS5zdGF0ZV91c2VyID0gIiI7CiAgICAgIHN0YXRlLnN0YXRlX3Rva2VuID0gIiI7CiAgICB9LAogICAgbG9naW5fc3VjY2VzcyhzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS5zdGF0ZV9hdXRob3JpemUgPSB0cnVlOwogICAgICBzdGF0ZS5zdGF0ZV91c2VyID0gZGF0YS51c2VybmFtZTsKICAgIH0sCiAgICBzZXRfdG9rZW4oc3RhdGUsIGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coZGF0YSwgJ0FBQScpOwogICAgICBzdGF0ZS5zdGF0ZV90b2tlbiA9IGRhdGEuZGF0YS50b2tlbjsKICAgIH0KICB9LAogIC8vICEgRG8gc29tZXRoaW5nCiAgYWN0aW9uczogewogICAgLy8gISBsb2dpbiDguYDguILguYnguLLguKrguLnguYjguKPguLDguJrguJog4Lii4Lix4LiH4LmE4Lih4LmI4LmD4LiK4LmI4LiC4Lit4LiH4LiI4Lij4Li04LiHCiAgICBhc3luYyBsb2dpbl9hdXRoZW4oewogICAgICBjb21taXQKICAgIH0sIGRhdGEpIHsKICAgICAgbGV0IGRhdGFfcmV0dXJuID0ge307CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHBheWxvYWQgPSB7CiAgICAgICAgICB1c2VybmFtZTogZGF0YS51c2VybmFtZSwKICAgICAgICAgIHBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkCiAgICAgICAgfTsKICAgICAgICBjb25zdCBjYWxsX2FwaSA9IGF3YWl0IGF4aW9zLnBvc3QocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVE9ETyArICIvdXNlcnMvYXV0aCIsIHBheWxvYWQpOwogICAgICAgIGlmIChjYWxsX2FwaS5zdGF0dXNUZXh0ID09PSAiT0siKSB7CiAgICAgICAgICAvLyAhIHNldHRpbmcKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgZGF0YS51c2VybmFtZSk7CiAgICAgICAgICBWdWUuJGNvb2tpZXMuc2V0KCJhdXRoIiwgdHJ1ZSk7CiAgICAgICAgICBWdWUuJGNvb2tpZXMuc2V0KCJ0b2RvX3Rva2VuIiwgY2FsbF9hcGkuZGF0YS50b2tlbik7CiAgICAgICAgICAvLyAhIGNvbW1pdCB0byBsb2dpbiBzdWNjZXNzCiAgICAgICAgICBjb21taXQoImxvZ2luX3N1Y2Nlc3MiLCBkYXRhKTsKICAgICAgICAgIGNvbW1pdCgic2V0X3Rva2VuIiwgY2FsbF9hcGkpOwogICAgICAgICAgZGF0YV9yZXR1cm4gPSB7CiAgICAgICAgICAgIHN0YXR1czogIk9LIiwKICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAiIgogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gISBjb21taXQgdG8gbG9naW4gZmFpbAogICAgICAgICAgY29tbWl0KCJsb2dpbl9mYWlsIik7CiAgICAgICAgICBkYXRhX3JldHVybiA9IHsKICAgICAgICAgICAgc3RhdHVzOiAiRVIiLAogICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGNhbGxfYXBpLmRhdGEuZXJyb3JNZXNzYWdlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygiZXJyb3IgaW4gbG9naW5fYXV0aGVuIiwgZXJyb3IpOwogICAgICAgIGRhdGFfcmV0dXJuID0gewogICAgICAgICAgc3RhdHVzOiAiRVIiLAogICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yTWVzc2FnZSB8fCBlcnJvci5yZXF1ZXN0IHx8IGVycm9yCiAgICAgICAgfTsKICAgICAgfQogICAgICAvLyAhIHJldHVybgogICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzID0+IHsKICAgICAgICByZXMoZGF0YV9yZXR1cm4pOwogICAgICB9KTsKICAgIH0sCiAgICBsb2dvdXRfYXV0aGVuKCkgewogICAgICBWdWUuJGNvb2tpZXMucmVtb3ZlKCJhdXRoIik7CiAgICAgIFZ1ZS4kY29va2llcy5zZXQoInRvZG9fdG9rZW4iLCAiIik7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VyIik7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXR0ZXJzQXV0aG9yaXplOiBzdGF0ZSA9PiB7CiAgICAgIHJldHVybiBzdGF0ZS5zdGF0ZV9hdXRob3JpemU7CiAgICB9LAogICAgZ2V0dGVyc1Rva2VuOiBzdGF0ZSA9PiB7CiAgICAgIHJldHVybiBzdGF0ZS5zdGF0ZV90b2tlbjsKICAgIH0KICB9Cn0pOw=="},{"version":3,"names":["Vue","axios","VueCookies","Vuex","use","$cookies","config","Store","state","state_authorize","state_user","state_token","mutations","login_fail","login_success","data","username","set_token","console","log","token","actions","login_authen","commit","data_return","payload","password","call_api","post","process","env","VUE_APP_API_TODO","statusText","localStorage","setItem","set","status","errorMessage","error","response","request","Promise","res","logout_authen","remove","removeItem","getters","gettersAuthorize","gettersToken"],"sources":["/Users/arninbell/Documents/neversitup/todo-app/src/store/index.js"],"sourcesContent":["import Vue from \"vue\";\nimport axios from \"axios\";\nimport VueCookies from \"vue-cookies\";\nimport Vuex from \"vuex\";\n\nVue.use(VueCookies);\nVue.$cookies.config(\"1d\");\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    state_authorize: false,\n    state_user: \"\",\n    state_token: \"\",\n  },\n  mutations: {\n    login_fail(state) {\n      state.state_authorize = false;\n      state.state_user = \"\";\n      state.state_token = \"\";\n    },\n    login_success(state, data) {\n      state.state_authorize = true;\n      state.state_user = data.username;\n     \n    },\n    set_token(state,data){\n      console.log(data,'AAA');\n      state.state_token = data.data.token\n    }\n  },\n  // ! Do something\n  actions: {\n    // ! login เข้าสู่ระบบ ยังไม่ใช่ของจริง\n    async login_authen({ commit }, data) {\n      let data_return = {};\n      try {\n        let payload = {\n          username: data.username,\n          password: data.password,\n        };\n        const call_api = await axios.post( process.env.VUE_APP_API_TODO + \"/users/auth\", payload);\n        if (call_api.statusText === \"OK\") {\n          // ! setting\n          localStorage.setItem(\"user\", data.username);\n          Vue.$cookies.set(\"auth\", true);\n          Vue.$cookies.set(\"todo_token\", call_api.data.token)\n          // ! commit to login success\n          commit(\"login_success\", data);\n          commit(\"set_token\", call_api)\n          \n          data_return = { status: \"OK\", errorMessage: \"\" };\n        } else {\n          // ! commit to login fail\n          commit(\"login_fail\");\n          data_return = { status: \"ER\", errorMessage: call_api.data.errorMessage };\n        }\n      } catch (error) {\n        console.log(\"error in login_authen\", error);\n        data_return = { status: \"ER\", errorMessage: error.response.data.errorMessage || error.request || error };\n      }\n      // ! return\n      return new Promise((res) => {\n        res(data_return);\n      });\n    },\n    logout_authen() {\n      Vue.$cookies.remove(\"auth\");\n      Vue.$cookies.set(\"todo_token\", \"\")\n      localStorage.removeItem(\"user\");\n    },\n  },\n  getters: {\n \n    gettersAuthorize: (state) => {\n      return state.state_authorize;\n    },\n    gettersToken: (state) => {\n      return state.state_token\n    }\n  },\n});\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,UAAU,MAAM,aAAa;AACpC,OAAOC,IAAI,MAAM,MAAM;AAEvBH,GAAG,CAACI,GAAG,CAACF,UAAU,CAAC;AACnBF,GAAG,CAACK,QAAQ,CAACC,MAAM,CAAC,IAAI,CAAC;AACzBN,GAAG,CAACI,GAAG,CAACD,IAAI,CAAC;AAEb,eAAe,IAAIA,IAAI,CAACI,KAAK,CAAC;EAC5BC,KAAK,EAAE;IACLC,eAAe,EAAE,KAAK;IACtBC,UAAU,EAAE,EAAE;IACdC,WAAW,EAAE;EACf,CAAC;EACDC,SAAS,EAAE;IACTC,UAAU,CAACL,KAAK,EAAE;MAChBA,KAAK,CAACC,eAAe,GAAG,KAAK;MAC7BD,KAAK,CAACE,UAAU,GAAG,EAAE;MACrBF,KAAK,CAACG,WAAW,GAAG,EAAE;IACxB,CAAC;IACDG,aAAa,CAACN,KAAK,EAAEO,IAAI,EAAE;MACzBP,KAAK,CAACC,eAAe,GAAG,IAAI;MAC5BD,KAAK,CAACE,UAAU,GAAGK,IAAI,CAACC,QAAQ;IAElC,CAAC;IACDC,SAAS,CAACT,KAAK,EAACO,IAAI,EAAC;MACnBG,OAAO,CAACC,GAAG,CAACJ,IAAI,EAAC,KAAK,CAAC;MACvBP,KAAK,CAACG,WAAW,GAAGI,IAAI,CAACA,IAAI,CAACK,KAAK;IACrC;EACF,CAAC;EACD;EACAC,OAAO,EAAE;IACP;IACA,MAAMC,YAAY,CAAC;MAAEC;IAAO,CAAC,EAAER,IAAI,EAAE;MACnC,IAAIS,WAAW,GAAG,CAAC,CAAC;MACpB,IAAI;QACF,IAAIC,OAAO,GAAG;UACZT,QAAQ,EAAED,IAAI,CAACC,QAAQ;UACvBU,QAAQ,EAAEX,IAAI,CAACW;QACjB,CAAC;QACD,MAAMC,QAAQ,GAAG,MAAM1B,KAAK,CAAC2B,IAAI,CAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB,GAAG,aAAa,EAAEN,OAAO,CAAC;QACzF,IAAIE,QAAQ,CAACK,UAAU,KAAK,IAAI,EAAE;UAChC;UACAC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEnB,IAAI,CAACC,QAAQ,CAAC;UAC3ChB,GAAG,CAACK,QAAQ,CAAC8B,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC;UAC9BnC,GAAG,CAACK,QAAQ,CAAC8B,GAAG,CAAC,YAAY,EAAER,QAAQ,CAACZ,IAAI,CAACK,KAAK,CAAC;UACnD;UACAG,MAAM,CAAC,eAAe,EAAER,IAAI,CAAC;UAC7BQ,MAAM,CAAC,WAAW,EAAEI,QAAQ,CAAC;UAE7BH,WAAW,GAAG;YAAEY,MAAM,EAAE,IAAI;YAAEC,YAAY,EAAE;UAAG,CAAC;QAClD,CAAC,MAAM;UACL;UACAd,MAAM,CAAC,YAAY,CAAC;UACpBC,WAAW,GAAG;YAAEY,MAAM,EAAE,IAAI;YAAEC,YAAY,EAAEV,QAAQ,CAACZ,IAAI,CAACsB;UAAa,CAAC;QAC1E;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdpB,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEmB,KAAK,CAAC;QAC3Cd,WAAW,GAAG;UAAEY,MAAM,EAAE,IAAI;UAAEC,YAAY,EAAEC,KAAK,CAACC,QAAQ,CAACxB,IAAI,CAACsB,YAAY,IAAIC,KAAK,CAACE,OAAO,IAAIF;QAAM,CAAC;MAC1G;MACA;MACA,OAAO,IAAIG,OAAO,CAAEC,GAAG,IAAK;QAC1BA,GAAG,CAAClB,WAAW,CAAC;MAClB,CAAC,CAAC;IACJ,CAAC;IACDmB,aAAa,GAAG;MACd3C,GAAG,CAACK,QAAQ,CAACuC,MAAM,CAAC,MAAM,CAAC;MAC3B5C,GAAG,CAACK,QAAQ,CAAC8B,GAAG,CAAC,YAAY,EAAE,EAAE,CAAC;MAClCF,YAAY,CAACY,UAAU,CAAC,MAAM,CAAC;IACjC;EACF,CAAC;EACDC,OAAO,EAAE;IAEPC,gBAAgB,EAAGvC,KAAK,IAAK;MAC3B,OAAOA,KAAK,CAACC,eAAe;IAC9B,CAAC;IACDuC,YAAY,EAAGxC,KAAK,IAAK;MACvB,OAAOA,KAAK,CAACG,WAAW;IAC1B;EACF;AACF,CAAC,CAAC"}]}